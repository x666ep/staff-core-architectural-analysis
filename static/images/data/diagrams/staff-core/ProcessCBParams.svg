<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="352px" preserveAspectRatio="none" style="width:444px;height:352px;background:#FFFFFF;" version="1.1" viewBox="0 0 444 352" width="444px" zoomAndPan="magnify"><defs/><g><ellipse cx="225.5" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="48.2656" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="114.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="202" x="124.5" y="71.6016">Выбираем из табличек *_changes</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="177" x="124.5" y="85.7344">не примененные изменения</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="361" x="45" y="162.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="341" x="55" y="183.8672">подготавливаем ивент/ивенты для внутреннего топика</text><rect fill="#F1F1F1" height="48.2656" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="326" x="62.5" y="216.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="306" x="72.5" y="238">кладем наши события в табличку employee_events</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="208" x="72.5" y="252.1328">для дальнейшей отправки в kafka</text><rect fill="#F1F1F1" height="34.1328" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="270" x="90.5" y="284.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="250" x="100.5" y="306.2656">обновляем данные в табличке employees</text><polygon fill="#F1F1F1" points="117,118.2656,334,118.2656,346,130.2656,334,142.2656,117,142.2656,105,130.2656,117,118.2656" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="217" x="117" y="134.4229">Перебираем в цикле массив изменений</text><ellipse cx="24" cy="173.2656" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="24" cy="173.2656" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="30" y2="50"/><polygon fill="#181818" points="221.5,40,225.5,50,229.5,40,225.5,44" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="196.3984" y2="216.3984"/><polygon fill="#181818" points="221.5,206.3984,225.5,216.3984,229.5,206.3984,225.5,210.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="264.6641" y2="284.6641"/><polygon fill="#181818" points="221.5,274.6641,225.5,284.6641,229.5,274.6641,225.5,278.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="142.2656" y2="162.2656"/><polygon fill="#181818" points="221.5,152.2656,225.5,162.2656,229.5,152.2656,225.5,156.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="318.7969" y2="328.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="418" y1="328.7969" y2="328.7969"/><polygon fill="#181818" points="414,238.5313,418,228.5313,422,238.5313,418,234.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="418" x2="418" y1="130.2656" y2="328.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="418" x2="346" y1="130.2656" y2="130.2656"/><polygon fill="#181818" points="356,126.2656,346,130.2656,356,134.2656,352,130.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="24" y1="130.2656" y2="130.2656"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="24" y1="130.2656" y2="162.2656"/><polygon fill="#181818" points="20,152.2656,24,162.2656,28,152.2656,24,156.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="225.5" y1="98.2656" y2="118.2656"/><polygon fill="#181818" points="221.5,108.2656,225.5,118.2656,229.5,108.2656,225.5,112.2656" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[3cf99a97e4f24a6c54cb26b5ecf76516]
@startuml ProcessCBParams
skinparam ConditionEndStyle hline 
scale max 500 height
    start
        :Выбираем из табличек *_changes
        не примененные изменения;
        while (Перебираем в цикле массив изменений)
            :подготавливаем ивент/ивенты для внутреннего топика;
            :кладем наши события в табличку employee_events
            для дальнейшей отправки в kafka;
            :обновляем данные в табличке employees;
        endwhile
    stop
@enduml

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: RU
--></g></svg>